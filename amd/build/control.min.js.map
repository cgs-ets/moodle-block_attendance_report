{"version":3,"sources":["../src/control.js"],"names":["define","$","Ajax","Log","Controls","username","campus","self","prototype","main","getAttendanceRollmarking","call","methodname","args","done","response","htmlResult","html","delay","fadeOut","replaceWith","fail","reason","error","debug","init","element","document","getElementById","getAttribute","control"],"mappings":"AAuBAA,OAAM,mCAAC,CAAC,QAAD,CAAW,WAAX,CAAwB,UAAxB,CAAD,CAAsC,SAAUC,CAAV,CAAaC,CAAb,CAAmBC,CAAnB,CAAwB,CAChE,aAgBA,QAASC,CAAAA,CAAT,CAAkBC,CAAlB,CAA4BC,CAA5B,CAAoC,CAChC,GAAIC,CAAAA,CAAI,CAAG,IAAX,CACAA,CAAI,CAACF,QAAL,CAAgBA,CAAhB,CACAE,CAAI,CAACD,MAAL,CAAcA,CACjB,CAMDF,CAAQ,CAACI,SAAT,CAAmBC,IAAnB,CAA0B,UAAY,CAClC,GAAIF,CAAAA,CAAI,CAAG,IAAX,CACAA,CAAI,CAACG,wBAAL,EAEH,CAJD,CAMAN,CAAQ,CAACI,SAAT,CAAmBE,wBAAnB,CAA8C,UAAY,IAClDH,CAAAA,CAAI,CAAG,IAD2C,CAEhDF,CAAQ,CAAGE,CAAI,CAACF,QAFgC,CAGhDC,CAAM,CAAGC,CAAI,CAACD,MAHkC,CAKtDJ,CAAI,CAACS,IAAL,CAAU,CAAC,CACPC,UAAU,CAAE,4DADL,CAEPC,IAAI,CAAE,CACFR,QAAQ,CAAEA,CADR,CAEFC,MAAM,CAAEA,CAFN,CAFC,CAOPQ,IAAI,CAAE,cAAUC,CAAV,CAAoB,CACtB,GAAMC,CAAAA,CAAU,CAAGD,CAAQ,CAACE,IAA5B,CACAhB,CAAC,CAAC,sCAAD,CAAD,CAAwCiB,KAAxC,CAA8C,GAA9C,EAAoDC,OAApD,CAA4D,GAA5D,EACAlB,CAAC,CAAC,sCAAD,CAAD,CAAwCmB,WAAxC,CAAoDJ,CAApD,CACH,CAXM,CAaPK,IAAI,CAAE,cAAUC,CAAV,CAAkB,CACpBnB,CAAG,CAACoB,KAAJ,CAAU,oFAAV,EACApB,CAAG,CAACqB,KAAJ,CAAUF,CAAV,EACArB,CAAC,CAAC,sCAAD,CAAD,CAAwCmB,WAAxC,CAAoD,0EAApD,CACH,CAjBM,CAAD,CAAV,CAoBH,CAzBD,CA4BA,MAAO,CAAEK,IAAI,CA1Db,UAAgB,CACZtB,CAAG,CAACqB,KAAJ,CAAU,uDAAV,EADY,GAENE,CAAAA,CAAO,CAAGC,QAAQ,CAACC,cAAT,CAAwB,uBAAxB,CAFJ,CAGNvB,CAAQ,CAAGqB,CAAO,CAACG,YAAR,CAAqB,eAArB,CAHL,CAINvB,CAAM,CAAGoB,CAAO,CAACG,YAAR,CAAqB,aAArB,CAJH,CAKRC,CAAO,CAAG,GAAI1B,CAAAA,CAAJ,CAAaC,CAAb,CAAuBC,CAAvB,CALF,CAMZwB,CAAO,CAACrB,IAAR,EACH,CAmDM,CACV,CA9DK,CAAN","sourcesContent":["\n// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n\n/**\n * @package   block_attendance_report_report\n * @copyright 2021 Veronica Bermegui\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(['jquery', 'core/ajax', 'core/log'], function ($, Ajax, Log) {\n    'use strict';\n\n    function init() {\n        Log.debug(\"block_attendance_report_report: initialising controls\");\n        const element = document.getElementById('rollmarking-container');\n        const username = element.getAttribute('data-username');\n        const campus = element.getAttribute('data-campus');\n        var control = new Controls(username, campus);\n        control.main();\n    }\n\n    /**\n    * Controls a single block_assignmentsquizzes_report block instance contents.\n    *\n    * @constructor\n    */\n    function Controls(username, campus) {\n        let self = this;\n        self.username = username;\n        self.campus = campus;\n    }\n\n    /**\n     * Run the controller.\n     *\n     */\n    Controls.prototype.main = function () {\n        let self = this;\n        self.getAttendanceRollmarking();\n\n    };\n\n    Controls.prototype.getAttendanceRollmarking = function () {\n        let self = this;\n        const username = self.username;\n        const campus = self.campus;\n\n        Ajax.call([{\n            methodname: 'block_attendance_report_get_attendance_rollmarking_context',\n            args: {\n                username: username,\n                campus: campus\n            },\n\n            done: function (response) {\n                const htmlResult = response.html;\n                $('[data-region=\"rm-table-container\"]').delay(2000).fadeOut(400);\n                $('[data-region=\"rm-table-container\"]').replaceWith(htmlResult);\n            },\n\n            fail: function (reason) {\n                Log.error('block_attendance_report_get_attendance_rollmarking_context: Unable to get context.');\n                Log.debug(reason);\n                $('[data-region=\"rm-table-container\"]').replaceWith('<p class=\"alert alert-danger\">Data not available. Please try later</p>');\n            }\n        }]);\n\n    };\n\n\n    return { init: init }\n});\n"],"file":"control.min.js"}