{"version":3,"sources":["../src/control.js"],"names":["define","$","Ajax","Log","Controls","username","self","prototype","main","getAttendanceRollmarking","call","methodname","args","done","response","htmlResult","html","delay","fadeOut","replaceWith","fail","reason","error","debug","init","element","document","getElementById","getAttribute","control"],"mappings":"AAuBAA,OAAM,mCAAC,CAAC,QAAD,CAAW,WAAX,CAAwB,UAAxB,CAAD,CAAsC,SAAUC,CAAV,CAAaC,CAAb,CAAmBC,CAAnB,CAAwB,CAChE,aAgBA,QAASC,CAAAA,CAAT,CAAkBC,CAAlB,CAA4B,CACxB,GAAIC,CAAAA,CAAI,CAAG,IAAX,CACAA,CAAI,CAACD,QAAL,CAAgBA,CACnB,CAMDD,CAAQ,CAACG,SAAT,CAAmBC,IAAnB,CAA0B,UAAY,CAClC,GAAIF,CAAAA,CAAI,CAAG,IAAX,CACAA,CAAI,CAACG,wBAAL,EAEH,CAJD,CAMAL,CAAQ,CAACG,SAAT,CAAmBE,wBAAnB,CAA8C,UAAY,IAClDH,CAAAA,CAAI,CAAG,IAD2C,CAEhDD,CAAQ,CAAGC,CAAI,CAACD,QAFgC,CAGtDH,CAAI,CAACQ,IAAL,CAAU,CAAC,CACPC,UAAU,CAAE,4DADL,CAEPC,IAAI,CAAE,CACFP,QAAQ,CAAEA,CADR,CAFC,CAMPQ,IAAI,CAAE,cAAUC,CAAV,CAAoB,CACtB,GAAMC,CAAAA,CAAU,CAAGD,CAAQ,CAACE,IAA5B,CACAf,CAAC,CAAC,sCAAD,CAAD,CAAwCgB,KAAxC,CAA8C,GAA9C,EAAoDC,OAApD,CAA4D,GAA5D,EACAjB,CAAC,CAAC,sCAAD,CAAD,CAAwCkB,WAAxC,CAAoDJ,CAApD,CACH,CAVM,CAYPK,IAAI,CAAE,cAAUC,CAAV,CAAkB,CACpBlB,CAAG,CAACmB,KAAJ,CAAU,oFAAV,EACAnB,CAAG,CAACoB,KAAJ,CAAUF,CAAV,EACApB,CAAC,CAAC,sCAAD,CAAD,CAAwCkB,WAAxC,CAAoD,0EAApD,CACH,CAhBM,CAAD,CAAV,CAmBH,CAtBD,CAyBA,MAAO,CAAEK,IAAI,CAtDb,UAAgB,CACZrB,CAAG,CAACoB,KAAJ,CAAU,uDAAV,EADY,GAENE,CAAAA,CAAO,CAAGC,QAAQ,CAACC,cAAT,CAAwB,uBAAxB,CAFJ,CAGNtB,CAAQ,CAAGoB,CAAO,CAACG,YAAR,CAAqB,eAArB,CAHL,CAKRC,CAAO,CAAG,GAAIzB,CAAAA,CAAJ,CAAaC,CAAb,CALF,CAMZwB,CAAO,CAACrB,IAAR,EACH,CA+CM,CACV,CA1DK,CAAN","sourcesContent":["\n// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n\n/**\n * @package   block_attendance_report_report\n * @copyright 2021 Veronica Bermegui\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(['jquery', 'core/ajax', 'core/log'], function ($, Ajax, Log) {\n    'use strict';\n\n    function init() {\n        Log.debug(\"block_attendance_report_report: initialising controls\");\n        const element = document.getElementById('rollmarking-container');\n        const username = element.getAttribute('data-username');\n\n        var control = new Controls(username);\n        control.main();\n    }\n\n    /**\n    * Controls a single block_assignmentsquizzes_report block instance contents.\n    *\n    * @constructor\n    */\n    function Controls(username) {\n        let self = this;\n        self.username = username;\n    }\n\n    /**\n     * Run the controller.\n     *\n     */\n    Controls.prototype.main = function () {\n        let self = this;\n        self.getAttendanceRollmarking();\n\n    };\n\n    Controls.prototype.getAttendanceRollmarking = function () {\n        let self = this;\n        const username = self.username;\n        Ajax.call([{\n            methodname: 'block_attendance_report_get_attendance_rollmarking_context',\n            args: {\n                username: username\n            },\n\n            done: function (response) {\n                const htmlResult = response.html;\n                $('[data-region=\"rm-table-container\"]').delay(2000).fadeOut(400);\n                $('[data-region=\"rm-table-container\"]').replaceWith(htmlResult);\n            },\n\n            fail: function (reason) {\n                Log.error('block_attendance_report_get_attendance_rollmarking_context: Unable to get context.');\n                Log.debug(reason);\n                $('[data-region=\"rm-table-container\"]').replaceWith('<p class=\"alert alert-danger\">Data not available. Please try later</p>');\n            }\n        }]);\n\n    };\n\n\n    return { init: init }\n});\n"],"file":"control.min.js"}